## 任务
### 总目标：实现一个能识别多种模态输入中风险内容的平台(的demo)

### 核心问题：
* 怎么测试，以什么指标呈现我们的效果？ 
* Demo要呈现什么样的内容？ 
* 大模型在其中起到了什么样的作用?

### 基本框架：
对除文本外模态都先做伪造（合成）检测，再做风险内容的检测，最后将抽取的文本模态信息做风险内容的识别，并通过文本/语音的形式给出提示和建议。
  


### 子任务：

#### 任务1：诈骗短信文本分类 + 风险点抽取
任务描述：识别文本是否存在风险，是否归属于某类风险，以及风险对应的词句\
输入：短信文本 \
输出1：风险类别\
输出2：识别风险的依据词语（如"点击链接")\
输出3：规避风险的相关建议
<br>
**示例：** \
输入：您好，这里是中国邮政，您的包裹需要补交税费，请提供银行卡信息进行支付。\
输出：
1. 风险点：["提供银行卡信息"]
2. 是否有风险：有风险
3. 风险类别：6(风险类别为第6类)
<br>    

任务难点：数据准备
* 目前已有第三人称的案件描述数据集（约10万条），如何利用LLM重写为第一人称的短信文本，并保证短信文本的真实性（不要机里机气）、多样性（避免模型学习语言模式本身）
* 目前的正负样本素材本身差异较大，如何通过联合生成来让生成的有风险短信和无风险短信在形式内容上有更好的一致性
* 不局限于短信，最好可以拓展到对话


方案：
* 数据准备：主要通过使用Deepseek的API + 设计Prompt模板来生成测试数据(基于CCL 2024 EVAL6数据集)
* 抽取：本地LLM（考虑微调） + 任务指令
* 分类：本地LLM（考虑微调） + 任务指令
* 考虑使用RAG，便于服务端快速更新新型诈骗案例

相关资料：
* openai/deepseek api文档 (用于调用LLM生成数据)
* AttrPrompt: https://arxiv.org/abs/2306.15895 (用于提升生成数据多样性)
<br>

#### 任务2：多模态谣言识别
解决方案：复用并改进NLP创新研修课的大作业，结合任务3、4、5里的合成检测
<br>

#### 任务3：视频换脸技术/剪辑识别（+ 色情暴力等其他风险点）
任务描述：识别视频是否使用了换脸技术(Deepfake)，是否进行了剪辑，也可以对其他内容（如暴力、色情做出判断），如果能对风险内容出现时间点做出标注更好。

方案：
* 选一个deepfake detection相关的开源方案跑通
* 使用元数据分析、识别帧间一致性、识别边缘伪影等方法做视频剪辑检测
* 使用视频理解模型直接抽取视频中的风险点及其时间点，以及生成视频caption接入任务1/2 pipeline
* 抽帧并使用图文多模态模型

相关资料：
* Deepfake Generation and Detection: A Benchmark and Survey https://arxiv.org/abs/2403.17881
去里面找找能用来做Demo的数据和有开源代码，容易部署的项目

* Video-LLAVA: https://github.com/PKU-YuanGroup/Video-LLaVA

<br>

#### 任务4：音频风险识别
任务描述：判定音频是否为合成的，并对其内容本身做风险点抽取、识别 \
方案：
* 音频合成问题单独做，找开源代码跑通
* 可将文本转文字后将文字送入LLM做风险点抽取、识别
* 也可以将转换后的文本连同音频一起送入多模态大模型，做风险点抽取、识别

<br>

#### 任务5：图片风险识别
任务描述：对于富文本图片，主要通过OCR+文本模态识别的方式处理。对于其他图片，先对其是否是合成的进行判断（尤其是含人脸的图片），然后对其图片内容进行分析来判断其是否含风险内容\
方案：
* OCR模型 $\rightarrow$ 任务1/2 pipeline
* deepfake detection
* 图文多模态模型用于分析图片内容

<br>

### TODO


#### 文本
- [x] 风险识别与抽取的功能实现与测试管线实现
- [ ] RAG系统搭建
   - 当前进度：可以进行向量检索，尚未考虑重排序和向量存储的问题
- [ ] 谣言识别

#### 数据
- [ ] 有/无风险短信数据集的构建
  - 当前进度：可以生成正负样例，但存在较大gap，多样性较差，且没有实现并发调用API
- [ ] 有/无风险对话数据集的构建

#### 图片
- [x] 伪造人脸检测
- [x] 合成图片检测
- [ ] 图片内容风险识别
  - 当前进度：功能初步完成，但稳定性和一致性较差，效果未达到预期
- [ ] OCR

#### 视频
- [ ] 视频内容风险识别
  - 当前进度：功能初步完成，效果未达到预期
- [ ] 伪造视频检测
  - 当前进度：暂时无法识别无音频的视频
- [ ] 视频换脸技术检测
  

#### 音频
- [ ] 语音转文字
  - 当前进度：功能初步完成，但未测试是否兼容当前CUDA版本
- [ ] 伪造语音检测
- [ ] 文字转语音（用于输出）


